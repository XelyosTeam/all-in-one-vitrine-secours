{# Page pour les candidatures #}
{% extends "_base.twig" %}

{% block style %}
  <link rel="stylesheet" type="text/css" href="/assets/styles/global/form.css">
{% endblock %}

{% block description %}Candidature{% endblock %}

{% block key %}Candidature{% endblock %}

{% block title %}- Candidature{% endblock %}

{% block navigation %}
  <p><a href="/">Accueil</a></p>
  <p><a href="/Reglements">Règlements</a></p>
  <p><a href="/Histoire">Histoire</a></p>
{% endblock %}

{% block main %}
  <form class="connexion" action="/ajout-candidature" enctype="multipart/form-data" method="post">

    <section class="contenu">
      <h1>Inscription Civil</h1>
        <div>
          <label for="dicord">Identifiant Discord* :</label>
          <input type="text" name="candid_discord" id="dicord" placeholder="Entrer votre identifiant discord" required>
        </div>

        <div>
          <label for="phone">Téléphone (IG)* :</label>
          <input type="tel" name="candid_phone" id="phone" placeholder="Numéro de téléphone" required>
        </div>
    </section>

    <section class="contenu">
      <h1>Présentation</h1>

      <div>
        <label for="name">Nom (IG)* :</label>
        <input type="text" name="candid_name" id="name" placeholder="Nom" required>
      </div>

      <div>
        <label for="firstname">Prénom (IG)* :</label>
        <input type="text" name="candid_firstname" id="firstname" placeholder="Prénom" required>
      </div>

      <div>
        <label for="age_ig">Age(IG)* :</label>
        <input type="number" name="candid_ig" id="age_ig" min="17" max="60" placeholder="Age IG" required>
      </div>

      <div>
        <label for="age_irl">Age(IRL)* :</label>
        <input type="number" name="candid_irl" id="age_irl"  min="14" max="80" placeholder="Age IRL" required>
      </div>
    </section>

    <section class="contenu">
      <h1>Information</h1>

      <div>
        <label for="server_time">Temps de jeu sur le serveur* :</label>
        <input type="number" name="candid_server_time" id="server_time"  min="0" placeholder="Temps en heure" required>
      </div>

      <div>
        <label for="gta_time">Temps de jeu GTA RP* :</label>
        <input type="number" name="candid_gta_time" id="gta_time"  min="0" placeholder="Temps en heure" required>
      </div>

      <div>
        <label id="force" for="faction">Avez-vous déjà été secouriste ?</label>
        <select name="candid_faction" id="faction" onchange="change_force()">
          <option value="0">Non</option>
          <option value="1">Oui</option>
        </select>
      </div>

      <div id="force_suite">
        <label for="detail_faction">Laquelle et à quel poste ?</label>
        <input type="text" name="candid_detail_faction" id="detail_faction" placeholder="Nom + poste">
      </div>
    </section>

    {# Saisie des disponibilité #}
    {% set __superVar = [] %}
    {% set __ecole = { 'titre': "Periode scolaire/alternance", 'label': "time_school", 'type' : 'school' } %}
    {% set __travail = { 'titre': "Periode de Travail/Stage/Alternance", 'label': "time_work", 'type' : 'work' } %}
    {% set __vacance = { 'titre': "Periode de vacances", 'label': "time_vacances", 'type' : 'vacances' } %}

    {% set __types = ['school', 'work', 'vacances'] %}
    {% set __days = ['Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi', 'Dimanche'] %}
    {% set __hzs = ['am', 'pm', 'abend', 'night'] %}

    {% set __superVar = __superVar|merge([__ecole, __travail, __vacance]) %}

    <section class="contenu">
      <h1>Disponibilité</h1>
      {% for periode in __superVar %}
        {% set index = loop.index %}
        <div>
          <label for="{{ periode.label }}">{{ periode.titre }} :</label>
          <select name="candid_{{ periode.label }}" id="{{ periode.label }}" onchange="visibility_{{ index }}()">
            <option value="1">Concerné</option>
            <option value="0">Non Concerné</option>
          </select>
        </div>

        <div style="display: block;" id="dispo_{{ index }}">
          <section class="grille_dispo">
            <p></p>
            <p class="except">Matin</p>
            <p class="except">Après-midi</p>
            <p class="except">Soir</p>
            <p class="except">Nuit</p>
            {% for day in __days %}
              <p>{{ day }}</p>
              {% for hz in __hzs %}
                <input type="checkbox" name="{{ __types[ index - 1 ] }}_{{ day|slice(0, 3)|lower}}_{{ hz }}">
              {% endfor %}
            {% endfor %}
          </section>
        </div>
      {% endfor %}
    </section>


    <section class="contenu">
      <h1>Objectifs au sein des secours</h1>

      <div>
        <label for="unite">Quelles unités des souhaitez-vous intégrer ?</label>
        <input type="text" name="candid_unite" id="unite" placeholder="Maritime / Aérienne / etc..." required>
      </div>

      <div>
        <label>Quels sont vos motivations* ?</label>
        <textarea id="candid_motivation" name="candid_motivations" rows="10" placeholder="Motivations" required></textarea>
      </div>
    </section>

    <section class="contenu">
      <h1>Test de connaissance</h1>

      {% for q, question in questions %}
        <div>
          {% if question.type == "list" %}
            <label for="question_{{ q }}">{{ question.title }}</label>
            <select name="question_{{ q }}">
              {% for r, response in question.responses %}
                <option value="{{ r }}">{{ response }}</option>
              {% endfor %}
            </select>
          {% elseif question.type == "text" %}
            <label>{{ question.title }}</label>
            <input type="text" name="question_{{ q }}" placeholder="Votre réponse" required>
          {% endif %}
        </div>
      {% endfor %}
    </section>

    <section class="contenu">
      <h1>Ajouter document(s)</h1>

      <div>
        <label for="uploads">Insérer des documents :</label>
        <input id="uploads" type="file" accept="application/pdf" name="attachments[]" onchange="checkSizeFiles()" multiple>
        <input id="taillemax" type="hidden" name="MAX_FILE_SIZE" value="5000000">

      </div>

      <div id="alert-taille" class="alertTaille">
        <p>Taille maximum des fichiers dépassée</p>
      </div>

      <div class="btn">
        <p></p>
        <button id="submit-button" type="submit" name="button">Envoyer</button>
      </div>
    </section>
  </form>
{% endblock %}

{% block script %}
  <script type="text/javascript" src="/assets/script/candidature.js"></script>
{% endblock %}
